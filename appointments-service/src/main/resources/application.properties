spring.application.name=appointments-service

# --- SERVER CONFIGURATION ---
server.port=${SERVER_PORT}
server.address=${SERVER_ADDRESS}

# --- ACTUATOR/MONITORING CONFIGURATION ---
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS_EXPOSURE}
management.endpoint.health.show-details=${MANAGEMENT_HEALTH_SHOW_DETAILS}
management.endpoints.web.base-path=${MANAGEMENT_BASE_PATH}
management.endpoints.web.cors.allowed-origins=${CORS_ALLOWED_ORIGINS}
management.endpoints.web.cors.allowed-methods=GET,OPTIONS
management.endpoints.web.cors.allowed-headers=*

# --- CORS CONFIGURATION ---
spring.web.cors.allowed-origins=${CORS_ALLOWED_ORIGINS}
spring.web.cors.allowed-methods=${CORS_ALLOWED_METHODS}
spring.web.cors.allowed-headers=${CORS_ALLOWED_HEADERS}
spring.web.cors.allow-credentials=${CORS_ALLOW_CREDENTIALS}

# --- DATABASE CONFIGURATION (PostgreSQL) ---
# LOCAL DEVELOPMENT: Using localhost instead of Docker service names
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=${DB_DRIVER}

# --- JPA/Hibernate CONFIGURATION ---
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO}
spring.jpa.show-sql=${JPA_SHOW_SQL}
spring.jpa.properties.hibernate.dialect=${JPA_DIALECT}

# Validate JPA queries at startup
spring.jpa.properties.hibernate.query.startup_check=true

# Show detailed SQL and validation errors
spring.jpa.properties.hibernate.format_sql=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# --- SWAGGER/OPENAPI CONFIGURATION ---
springdoc.api-docs.path=${SWAGGER_PATH}
springdoc.swagger-ui.path=${SWAGGER_UI_PATH}
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.operations-sorter=alpha
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.disable-swagger-default-url=true

# --- RABBITMQ CONFIGURATION ---
# Connect to native Windows RabbitMQ instance on localhost:5672
spring.rabbitmq.host=${RABBITMQ_HOST}
spring.rabbitmq.port=${RABBITMQ_PORT}
spring.rabbitmq.username=${RABBITMQ_USERNAME}
spring.rabbitmq.password=${RABBITMQ_PASSWORD}
spring.rabbitmq.virtual-host=${RABBITMQ_VIRTUAL_HOST}

# Connection pool settings
spring.rabbitmq.connection-timeout=${RABBITMQ_CONNECTION_TIMEOUT}

# Listener settings for message consumption
spring.rabbitmq.listener.simple.acknowledge-mode=auto
spring.rabbitmq.listener.simple.concurrency=1
spring.rabbitmq.listener.simple.max-concurrency=3
spring.rabbitmq.listener.simple.prefetch=1

# --- VIDEO CONSULTATION SERVICE CONFIGURATION ---
# Video service URL (Python FastAPI service)
video.service.url=${VIDEO_SERVICE_URL:http://localhost:8000}
