syntax = "proto3";

package events.v1;

option go_package = "auth-service/internal/proto";

// User registration event message
message UserRegistrationEvent {
  // Unique user identifier
  string user_id = 1;
  
  // User email address
  string email = 2;
  
  // User role (PATIENT, DOCTOR, PHARMACIST, etc.)
  string role = 3;
  
  // Optional user first name
  string first_name = 4;
  
  // Optional user last name
  string last_name = 5;
  
  // Event timestamp (Unix timestamp in seconds)
  int64 timestamp = 6;

  // user phone number
  string phone_number = 7;
  
  // Event type identifier
  string event_type = 8;
  
  // Optional clinic information (for CLINIC_ADMIN users)
  ClinicData clinic_data = 9;
  
  // Optional pharmacy information (for PHARMACIST users)
  PharmacyData pharmacy_data = 10;
}

// Clinic data for clinic admin registration
message ClinicData {
  // Clinic ID from profile service (for updates)
  int64 clinic_id = 1;
  
  // Clinic name
  string name = 2;
  
  // Physical address
  string physical_address = 3;
  
  // Contact phone
  string contact_phone = 4;
  
  // Operating hours
  string operating_hours = 5;
}

// Pharmacy data for pharmacist registration
message PharmacyData {
  // Pharmacy ID from profile service (for updates)
  int64 pharmacy_id = 1;
  
  // Pharmacy name
  string name = 2;
  
  // Pharmacy license number
  string license_number = 3;
  
  // Physical address
  string address = 4;
  
  // Contact phone
  string contact_phone = 5;
  
  // Operating hours
  string operating_hours = 6;
  
  // Fulfillment radius in kilometers
  int32 fulfillment_radius_km = 7;
}

// Clinic update event message
message ClinicUpdateEvent {
  // Profile service clinic ID
  int64 clinic_id = 1;
  
  // Updated clinic name
  string name = 2;
  
  // Updated physical address
  string address = 3;
  
  // Updated contact phone
  string contact_phone = 4;
  
  // Updated operating hours
  string operating_hours = 5;
  
  // Whether the clinic is active
  bool is_active = 6;
  
  // Event timestamp
  int64 timestamp = 7;
  
  // Event type identifier
  string event_type = 8;
}

// Response message for user registration events
message UserRegistrationEventResponse {
  // Whether the event was processed successfully
  bool success = 1;
  
  // Optional message with details
  string message = 2;
  
  // Error code if processing failed
  string error_code = 3;
}

// Prescription dispensed event message
message PrescriptionDispensedEvent {
  // Prescription ID that was dispensed
  string prescription_id = 1;
  
  // Clinic ID where dispensing occurred
  string clinic_id = 2;
  
  // Catalog item ID that was dispensed
  string catalog_item_id = 3;
  
  // Quantity dispensed
  int32 quantity_dispensed = 4;
  
  // Total cost of dispensing
  string total_cost = 5;
  
  // Event timestamp (Unix timestamp in seconds)
  int64 timestamp = 6;
  
  // Event type identifier
  string event_type = 7;
}